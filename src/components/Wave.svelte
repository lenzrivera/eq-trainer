<script>
    import chroma from 'chroma-js';

    import { transitionend as transitionendUtil } from '../js/transitionend';

    export let color = 'white';

    let svgElem;

    $: glowColor = chroma(color).brighten(1.5).alpha(0.75);

    // Exports //

    export async function transitionend() {
        await transitionendUtil(svgElem);
    }
</script>

<style>
    svg {
        opacity: 0.9;
    }
</style>

<svg 
    bind:this={svgElem}
    class="{$$props.class}"
    style="{$$props.style}"

    width="100%" 
    height="100%" 
    viewBox="0 0 782 235" 
    preserveAspectRatio="none" 
    
    xmlns="http://www.w3.org/2000/svg" 
>
    <defs>
        <!-- From https://codepen.io/mathiesjanssen/pen/QgLzmM -->
        <filter id="inset-shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feComponentTransfer in=SourceAlpha>
              <feFuncA type="table" tableValues="1 0" />
            </feComponentTransfer>
            <feGaussianBlur stdDeviation="4"/>
            <feOffset dx="0" dy="0" result="offsetblur"/>
            <feFlood flood-color="{glowColor}" result="color"/>
            <feComposite in2="offsetblur" operator="in"/>
            <feComposite in2="SourceAlpha" operator="in" />
            <feMerge>
              <feMergeNode in="SourceGraphic" />
              <feMergeNode />
            </feMerge>
          </filter>
    </defs>

    <g transform="matrix(1,0,0,1,-56,-192.917)">
        <g transform="matrix(0.999835,0,0,2.76822,0.00895685,-566.03)">
            <path style="fill: {color};" filter="url(#inset-shadow)" d="M831.535,358.95C831.535,358.95 625.492,358.372 604,357.5C584.699,356.435 553.436,355.365 524.938,347.229C505.85,341.638 489.597,330.425 480,317C470.652,307.447 461.213,276 448,276C435.534,276 425.348,307.447 416,317C406.403,330.425 390.15,341.638 371.062,347.229C342.564,355.365 311.301,356.435 292,357.5C270.508,358.372 54.407,359.086 54.407,359.086" />
            <!-- <path style="fill: {color};" d="M831.535,358.95C831.535,358.95 739.69,358.504 672.251,357.944C638.8,357.667 611.364,357.364 604.176,357.063C593.298,356.445 578.616,355.82 562.795,353.916C550.776,352.469 538.093,350.28 525.938,346.781C517.407,344.264 509.482,340.596 502.48,336.104C494.044,330.691 486.962,324.084 481.84,316.828C481.826,316.809 481.81,316.79 481.791,316.771C475.336,310.137 468.917,292.94 461.138,283.063C458.754,280.036 456.184,277.679 453.529,276.444C451.775,275.628 449.857,275.248 448,275.248C446.189,275.248 444.271,275.643 442.527,276.504C439.992,277.756 437.496,280.115 435.142,283.13C427.42,293.018 420.669,310.154 414.232,316.774C414.214,316.793 414.198,316.812 414.185,316.831C409.063,324.087 401.979,330.695 393.544,336.109C386.541,340.603 378.619,344.274 370.087,346.792C357.926,350.291 345.236,352.478 333.213,353.925C317.39,355.828 302.707,356.453 291.838,357.07C284.635,357.372 255.875,357.689 220.732,357.987C150.351,358.582 54.407,359.086 54.407,359.086C54.407,359.086 150.366,358.956 220.764,358.612C256.066,358.44 284.948,358.21 292.134,357.931C292.15,357.931 292.166,357.93 292.181,357.929C303.18,357.34 318.039,356.754 334.08,354.878C346.437,353.432 359.485,351.221 372.025,347.669C372.03,347.668 372.035,347.666 372.04,347.665C380.898,345.09 389.185,341.334 396.498,336.714C405.162,331.24 412.466,324.55 417.794,317.199C424.312,310.554 431.321,293.427 439.124,283.538C440.958,281.214 442.816,279.298 444.751,278.043C445.458,277.585 446.155,277.222 446.878,276.98C447.262,276.852 447.606,276.752 448,276.752C448.428,276.752 448.817,276.844 449.229,276.971C449.978,277.203 450.694,277.555 451.416,278.002C453.419,279.243 455.309,281.151 457.154,283.474C465.004,293.355 471.658,310.548 478.186,317.206C483.51,324.554 490.816,331.244 499.478,336.719C506.791,341.341 515.076,345.099 523.935,347.676C523.94,347.677 523.945,347.679 523.95,347.68C536.497,351.232 549.551,353.442 561.912,354.887C577.956,356.762 592.815,357.348 603.815,357.937C603.831,357.938 603.847,357.939 603.863,357.939C611.021,358.216 638.592,358.428 672.219,358.579C739.676,358.881 831.535,358.95 831.535,358.95Z" /> -->
        </g>
    </g>
</svg>